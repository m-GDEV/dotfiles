# nvidia-settings: X configuration file generated by nvidia-settings
# nvidia-settings:  version 510.73.05

# nvidia-xconfig: X configuration file generated by nvidia-xconfig
# nvidia-xconfig:  version 510.60.02

# I manually edited this file on May 29 2022 to add support for a monitor connected by the iGPU
# I got as far as getting the second monitor to load and my mouse can go there with this config and the "mons" program. From there it seemed like i3 and polybar were working since i could create and move new windows to and from the monitor. Plus i could mute with polybar. The only problem was that it was complete black except for my mouse. If you come back, figure it out.

Section "ServerLayout"
    Identifier     "Layout0"
    Screen         "Screen0"
    Screen	   "Screen1" RightOf "Screen0"
    #InputDevice    "Keyboard0" "CoreKeyboard"
    #InputDevice    "Mouse0" "CorePointer"
    #Option         "Xinerama" "0"
EndSection

#Section "Files"
#EndSection

#Section "InputDevice"

    ## generated from default
    #Identifier     "Mouse0"
    #Driver         "mouse"
    #Option         "Protocol" "auto"
    #Option         "Device" "/dev/psaux"
    #Option         "Emulate3Buttons" "no"
    #Option         "ZAxisMapping" "4 5"
#EndSection

#Section "InputDevice"

    ## generated from default
    #Identifier     "Keyboard0"
    #Driver         "kbd"
#EndSection

Section "Monitor"
    Identifier     "Monitor0"
    VendorName     "Unknown"
    ModelName      "LG Electronics LG IPS FULLHD"
    HorizSync       30.0 - 83.0
    VertRefresh     56.0 - 75.0
    Option         "DPMS"
EndSection

# manually added so that iGPU monitor works
Section "Monitor"
	Identifier   "HDMI1"
	VendorName   "LG"
	Option       "Enable" "true"
	Modeline     "1920x1080_60.00"  173.00  1920 2048 2248 2576  1080 1083 1088 1120 -hsync +vsync
	Option       "PreferredMode" "1920x1080_60.00"
	#Option       "LeftOf" "HDMI-0"
EndSection

Section "Device"
    Identifier     "Device0"
    Driver         "nvidia"
    VendorName     "NVIDIA Corporation"
    BoardName      "NVIDIA GeForce RTX 3060"
    BusID          "PCI:1:0:0"
EndSection

# manually added so that iGPU monitor works
Section "Device"
	Identifier  "Device1"
	Driver      "intel"
	BusID       "PCI:0:2:0"
EndSection

Section "Screen"

# Removed Option "metamodes" "nvidia-auto-select +0+0 {ForceCompositionPipeline=On}"
    Identifier     "Screen0"
    Device         "Device0"
    Monitor        "Monitor0"
    DefaultDepth    24
    Option         "Stereo" "0"
    Option         "nvidiaXineramaInfoOrder" "DFP-0"
    Option         "metamodes" "nvidia-auto-select +0+0"
    Option         "SLI" "Off"
    Option         "MultiGPU" "Off"
    Option         "BaseMosaic" "off"
    SubSection     "Display"
        Depth       24
    EndSubSection
EndSection

# manually added, you get the point
Section "Screen"
	Identifier "Screen1"
	Device     "Device1"
	Monitor    "HDMI1"
	SubSection "Display"
		Viewport   0 0
		Depth     1
	EndSubSection
	SubSection "Display"
		Viewport   0 0
		Depth     4
	EndSubSection
	SubSection "Display"
		Viewport   0 0
		Depth     8
	EndSubSection
	SubSection "Display"
		Viewport   0 0
		Depth     15
	EndSubSection
	SubSection "Display"
		Viewport   0 0
		Depth     16
	EndSubSection
	SubSection "Display"
		Viewport   0 0
		Depth     24
	EndSubSection
EndSection

